# API WindBlog

## Общая информация

API WindBlog построено на Django REST Framework и предоставляет программный доступ ко всем функциям блога. Все эндпоинты следуют принципам REST и возвращают данные в формате JSON.

## Аутентификация

API поддерживает аутентификацию с использованием JWT (JSON Web Tokens). Для получения токена используйте следующий эндпоинт:

```
POST /api/token/
```

**Тело запроса:**
```json
{
  "username": "ваш_логин",
  "password": "ваш_пароль"
}
```

**Ответ:**
```json
{
  "access": "ваш_access_токен",
  "refresh": "ваш_refresh_токен"
}
```

Для обновления токена используйте:

```
POST /api/token/refresh/
```

**Тело запроса:**
```json
{
  "refresh": "ваш_refresh_токен"
}
```

## Основные эндпоинты

### Посты

#### Получение списка постов

```
GET /api/v1/posts/
```

Поддерживаемые параметры:
- `page` - номер страницы (пагинация)
- `status` - статус постов (published, draft)
- `tag` - фильтр по тегу
- `search` - поиск по тексту

#### Получение конкретного поста

```
GET /api/v1/posts/{id}/
```

#### Создание поста

```
POST /api/v1/posts/
```

**Требуются права администратора**

### Теги

#### Получение списка тегов

```
GET /api/v1/tags/
```

#### Получение конкретного тега

```
GET /api/v1/tags/{id}/
```

### Рейтинги

#### Получение списка рейтингов

```
GET /api/v1/ratings/
```

#### Получение рейтингов для поста

```
GET /api/v1/ratings/{post_id}/
```

#### Создание/обновление рейтинга

```
POST /api/v1/ratings/
```

**Тело запроса:**
```json
{
  "post": 1,
  "score": 5,
  "user_hash": "уникальный_идентификатор_пользователя"
}
```

#### Получение среднего рейтинга поста

```
GET /api/v1/ratings/{post_id}/average/
```

### Контактные сообщения

#### Отправка контактного сообщения

```
POST /api/v1/contact/
```

**Тело запроса:**
```json
{
  "name": "Имя отправителя",
  "email": "email@example.com",
  "subject": "Тема сообщения",
  "message": "Текст сообщения"
}
```

## Аналитика

#### Отправка аналитического события

```
POST /api/v1/analytics/
```

**Тело запроса:**
```json
{
  "event_type": "тип_события",
  "event_data": {"ключ": "значение"},
  "page_url": "/путь/страницы",
  "session_id": "идентификатор_сессии"
}
```

## Архив

#### Получение годовой сводки

```
GET /api/v1/archive/years/
```

#### Получение месячной сводки

```
GET /api/v1/archive/years/{year}/months/
```

#### Получение дневной сводки

```
GET /api/v1/archive/years/{year}/months/{month}/days/
```

#### Получение постов за конкретный день

```
GET /api/v1/archive/years/{year}/months/{month}/days/{day}/posts/
```

## Интерактивная документация

Для более подробной документации API используйте интерактивную документацию, доступную по адресу:

```
/api/docs/
```

Там вы найдете полную информацию о всех эндпоинтах, параметрах запросов и форматах ответов.
